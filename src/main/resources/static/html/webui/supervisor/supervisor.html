 <!DOCTYPE html>
 <html lang="en">

 <head>
 	<meta charset="utf-8">
 	<meta http-equiv="X-UA-Compatible" content="IE=edge">
 	<meta name="viewport" content="width=device-width, initial-scale=1">

	 <title> 导师 </title>
	 <script src='/html/webui/header/header.js'></script>
	 <link href="assets/css/style.css" rel="stylesheet">
	 <link href="assets/css/bootstrap.min.css" rel="stylesheet">
	 <link href="assets/css/line-awesome.min.css" rel="stylesheet">
<style type="text/css">
	#footer p{
		margin-bottom: 0;
	}
</style>
 </head>

 <body>
 	<!-- Event Section -->
 	<div class="event-area section-padding" style="padding: 0 0;">

 		<div class="container" >
			<div class="row">
				<div class="col-lg-10 offset-lg-1 text-center">
					<div class="section-title" style="margin-bottom: 0px;margin-top: 10px">

						<h2> 导师 <b>推荐 </b></h2>
						<p>假如我是诗人，我将以满腔的热情写下诗篇，赞美大海的辽阔和深远。
							并把它献给您——我的胸怀博大，知识精深的老师。</p>
						<!--<hr style="height:1px;border:none;border-top:1px solid #555555;" />
						<hr class="layui-bg-cyan">
						<hr class="layui-bg-blue">-->
						
						<!--<hr class="layui-bg-black">-->
					</div>

				</div>
			</div>
			<!--搜索框-->
			<div class="searchbox2" style="margin-top: 0">
				<input type="text" name="" id="searchPlaceholder" class="import" placeholder="请输入导师名称" οnkeypress="searchSupervisorByName()">
				<button onclick="searchSupervisorByName()" value="搜   索" class="btn-search2" >搜   索</button>
			</div>

 			<div class="row" id="supervisorList">
 				<!--导师列表具体内容-->
 			</div>


 		</div>

 	</div>
	<!--分页-->
	<div style="margin-right: 170px;float: right">
		<div  id="page" ></div>
	</div>

	<!--引入页脚页面-->
	<div id="footer"></div>



 <script type="text/javascript">
	 var $ = layui.jquery;
	 $(function () {
		 $("#footer").load("/html/webui/footer/footer.html");
		 searchSupervisorList();
	 })

	 //绑定搜索回车按键
	 $('.import').bind('keypress', function (event) {
		 if (event.keyCode == "13") {
			 searchSupervisorByName();
		 }
	 })

	 /**
	  * 查询导师列表
	  */
	 function searchSupervisorList(pageConf) {
		 if (!pageConf) {
			 pageConf = {};
			 pageConf.pageSize = 6;
			 pageConf.currentPage = 1;

		 }
		 $.get("/public/supervisor/searchSupervisorList", pageConf, function (data) {
			 layui.use(['laypage', 'layer'], function () {
				 var page = layui.laypage;
				 page.render({
					 elem: 'page',
					 count: data.count,
					 curr: pageConf.currentPage,
					 limit: pageConf.pageSize,
					 first: "首页",
					 last: "尾页",
					 layout: [ 'prev', 'page', 'next', 'skip'],// 'limit','count',
					 jump: function (obj, first) {
						 if (!first) {
							 pageConf.currentPage = obj.curr;
							 pageConf.pageSize = obj.limit;
							 searchSupervisorList(pageConf);
						 }
						 fillSupervisorList(data.data); //页面填充
					 }
				 });
			 })
		 })
	 }

	 /**
	  * 填充导师列表信息
	  * @param supervisorInfo
	  */
	 function fillSupervisorList(supervisorInfo) {
		 const $active =  $("#supervisorList");
		 $active.html("");
		 for(var i in supervisorInfo){
		 	const $children = (
		 			'<div class="col-lg-6 col-md-6 col-12">\n' +
					'  			<div class="single-event-wrap">\n' +
					' 				<div class="row">\n' +
					' 				<div class="col-lg-5">\n' +
					' 				  <div class="event-bg bg-cover" id="supervisorImage" style="background-image: url('+supervisorInfo[i].supervisorImage+');">\n' +
					' 						<span class="event-date" id="updateTime">'+supervisorInfo[i].updateTime+'</span>\n' +
					' 					</div>\n' +
					' 				  </div>\n' +
					' 			   <div class="col-lg-7">\n' +
					' 				 <div class="event-content">\n' +
					' 					<h6><span id="supervisorName" onclick="viewSupervisorDetail('+supervisorInfo[i].supervisorId+')" style="cursor: pointer">'+supervisorInfo[i].supervisorName+'</span></h6>\n' +
					'                   <p class="event-meta"> <i class="las la-clock"></i> <span ><span id="supervisorStatus" style="margin-right: 5px;">'+supervisorInfo[i].supervisorStatus+' </span>| <i class="las la-map-marker"></i> </span>  <span id="supervisorInstitute">'+supervisorInfo[i].supervisorInstitute+'</span> </p>\n' +
					'                   <p id="supervisorDescription">'+supervisorInfo[i].supervisorDescription+'</p>\n' +
					'                   <a href="#" onclick="viewSupervisorDetail('+supervisorInfo[i].supervisorId+')">Read More</a>\n' +
					'                </div>\n' +
					'              </div>\n' +
					'             </div>\n' +
					'           </div>\n' +
					'         </div>'
			);
		 	$active.append($children);
		 }
	 }

	 /**
	  * 查看导师详情
	  * @param supervisorId
	  */
	 function viewSupervisorDetail(supervisorId) {
		 localStorage.setItem("supervisorId",supervisorId)
		 window.location.href = "/html/webui/supervisor/supervisor_detail.html";
	 }

	 /**
	  * 根据名称搜索导师
	  */
	 function searchSupervisorByName() {
	 	var supervisorName = $("#searchPlaceholder").val();
	 	$.ajax({
			url: "/public/supervisor/searchSupervisorByName",
			type: "GET",
			data: "supervisorName="+supervisorName,
			success: function (res) {
				if(res.code == 200){
					fillSupervisorList(res.data);
				}else{
					layer.msg("网络异常！");
				}
			}
		})
	 }


 </script>

 </body>

 </html>
