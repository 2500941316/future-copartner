<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>tab切换</title>
    <link href="/html/webui/css/leasson.css" rel="stylesheet" type="text/css"/>

    <link href="/html/webui/css/main.css" rel="stylesheet" type="text/css"/>

    <link href="/html/managerui/js/layui/css/layui.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="/html/webui/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="/html/webui/js/jquery.SuperSlide.2.1.1.js"></script>
    <script src='/html/managerui/js/layui/layui.js'></script>

</head>
<body>

<!--引入页头页面-->
<div id="header"></div>
<div class="floor-course">
    <div class="floor-content">
        <div class="floor-side">
            <h3>
                <a href="#">在线·学习</a>
            </h3>
            <a href="#" class="floor-side-link">
                <img src="/html/webui/images/head-fl.jpg" alt="">
            </a>
        </div>
        <div class="floor-side-right">
            <div class="layui-tab" lay-filter="demo">
                <ul class="layui-tab-title">
                    <li class="layui-this" lay-id="0">课程</li>
                    <li lay-id="1">视频</li>
                </ul>
                <div class="layui-tab-content" style="height: 500px;">
                    <div class="layui-tab-item layui-show">
                        <div class="bd floor-side-body">
                            <ul id="leassons">

                            </ul>
                        </div>
                    </div>
                    <div class="layui-tab-item">
                        <div class="page-wrapper">
                            <!-- Sidebar Page Container -->
                            <div class="sidebar-page-container">
                                <div class="auto-container">
                                    <div class="row clearfix">
                                        <!-- Content Side -->
                                        <div class="content-side middle-sidebar layui-col-md8">
                                            <!-- Sec Title -->
                                            <div class="sec-title">
                                                <h4 id="course_title"></h4>
                                            </div>
                                            <!-- Video Box -->
                                            <div class="video-box">
                                                <figure class="video-image">
                                                    <img src="../images/video-image.jpg" alt="">
                                                </figure>
                                                <a href="https://www.youtube.com/watch?v=kxPCFljwJws"
                                                   class="lightbox-image overlay-box"><span
                                                        class="flaticon-media-play-symbol"><i class="ripple"></i></span></a>
                                            </div>
                                            <!-- Video Info Boxed -->
                                            <div class="video-info-boxed">
                                                <div class="clearfix">
                                                    <div class="pull-left">
                                                        <h6 style="text-align: center;display:inline-block"
                                                            id="course_title2"></h6>
                                                        <!-- Follow -->
                                                        <div class="follow"><a href="#">+ 关注</a></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- End Video Info Boxed -->

                                            <!-- Course Info Tabs-->
                                            <div class="layui-tab">
                                                <ul class="layui-tab-title">
                                                    <li class="layui-this">概述</li>
                                                    <li>目录</li>
                                                    <li>任务</li>
                                                </ul>
                                                <div class="layui-tab-content">
                                                    <div class="layui-tab-item layui-show" id="course_introduction"></div>
                                                    <div class="layui-tab-item">内容2</div>
                                                    <div class="layui-tab-item">内容3</div>
                                                    <div class="layui-tab-item">内容4</div>
                                                    <div class="layui-tab-item">内容5</div>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- Sidebar Side -->
                                        <div class="sidebar-side right-sidebar layui-col-md4">
                                            <aside class="sidebar sticky-top">

                                                <!-- Review Widget -->
                                                <div class="sidebar-widget review-widget">
                                                    <div class="widget-content">
                                                        <div class="content">
                                                            <!-- Video Box -->
                                                            <div class="intro-video">
                                                                <a href="https://www.youtube.com/watch?v=kxPCFljwJws"
                                                                   class="lightbox-image intro-video-box"><span
                                                                        class="fa fa-play"><i class="ripple"></i></span></a>
                                                                <h4>Preview this course</h4>
                                                            </div>
                                                            <!-- End Video Box -->
                                                            <div class="price">$11.99</div>
                                                            <div class="time-left">Original Price $199.99 <br>
                                                                Discount94% off
                                                            </div>
                                                            <div class="buttons-box">
                                                                <a href="#" class="theme-btn btn-style-two"><span
                                                                        class="txt">Course Details</span></a>
                                                                <a href="#" class="theme-btn btn-style-one"><span
                                                                        class="txt">Buy Now</span></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Review Widget -->

                                                <!-- Similar Courses Widget -->
                                                <div class="sidebar-widget popular-posts">
                                                    <div class="widget-content">
                                                        <div class="sidebar-title">
                                                            <h6>Similar Courses</h6>
                                                        </div>
                                                        <div class="content">

                                                            <article class="post">
                                                                <div class="post-inner">
                                                                    <figure class="post-thumb"><img
                                                                            src="images/resource/post-thumb-1.jpg"
                                                                            alt=""><a href="#" class="overlay-box"></a>
                                                                    </figure>
                                                                    <div class="text"><a href="#">Interface
                                                                        Introduction</a></div>
                                                                    <div class="timing">Class Time: 45:03min</div>
                                                                </div>
                                                            </article>

                                                            <article class="post">
                                                                <div class="post-inner">
                                                                    <figure class="post-thumb"><img
                                                                            src="images/resource/post-thumb-2.jpg"
                                                                            alt=""><a href="#" class="overlay-box"></a>
                                                                    </figure>
                                                                    <div class="text"><a href="#">Raster Image
                                                                        Principles</a></div>
                                                                    <div class="timing">Class Time: 45:03min</div>
                                                                </div>
                                                            </article>

                                                            <article class="post">
                                                                <div class="post-inner">
                                                                    <figure class="post-thumb"><img
                                                                            src="images/resource/post-thumb-3.jpg"
                                                                            alt=""><a href="#" class="overlay-box"></a>
                                                                    </figure>
                                                                    <div class="text"><a href="#">Panels &
                                                                        Workplaces</a></div>
                                                                    <div class="timing">Class Time: 45:03min</div>
                                                                </div>
                                                            </article>

                                                            <article class="post">
                                                                <div class="post-inner">
                                                                    <figure class="post-thumb"><img
                                                                            src="images/resource/post-thumb-4.jpg"
                                                                            alt=""><a href="#" class="overlay-box"></a>
                                                                    </figure>
                                                                    <div class="text"><a href="#">Image Manipulation</a>
                                                                    </div>
                                                                    <div class="timing">Class Time: 45:03min</div>
                                                                </div>
                                                            </article>

                                                            <article class="post">
                                                                <div class="post-inner">
                                                                    <figure class="post-thumb"><img
                                                                            src="images/resource/post-thumb-5.jpg"
                                                                            alt=""><a href="#" class="overlay-box"></a>
                                                                    </figure>
                                                                    <div class="text"><a href="#">Common File Types</a>
                                                                    </div>
                                                                    <div class="timing">Class Time: 45:03min</div>
                                                                </div>
                                                            </article>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Similar Courses Widget -->
                                            </aside>
                                        </div>
                                    </div>
                                    <!-- End Courses Section -->
                                </div>
                            </div>
                        </div>
                        <!-- End pagewrapper -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--引入页脚页面-->
<div id="footer"></div>

<script type="text/javascript">
    $(function () {
        $("#header").load("/html/webui/header/header.html");
        $("#footer").load("/html/webui/footer/footer.html");
        getLeassonInfo();
    });

    jQuery(".floor-side-right").slide({
        effect: "fade",
        autoPlay: false,
        trigger: "mouseover",
        delayTime: 700
    });

    layui.use('element', function () {
        var $ = layui.jquery
            , element = layui.element;

        //一些事件监听
        element.on('tab(demo)', function (data) {
            if (data.index === 1) {
                $.ajax({
                    type: "GET",
                    url: "/user/leasson/getcourseInfo_vedio",
                    data: {
                        courseId: localStorage.getItem("courseId")
                    },
                    success: function (data) {
                        renderVedioPage(data.data);
                    }
                });
            }
        });
    });


    //查询所有的课程信息
    function getLeassonInfo() {
        $.ajax({
            type: "GET",
            url: "/user/leasson/getLeassonInfo",
            success: function (data) {
                if (data.code === 200) {
                    //设置默认的视频id
                    if (data.data[0] != null) {
                        localStorage.setItem("courseId", data.data[0].courseId);
                    }
                    renderLeassons(data.data)
                } else
                    layer.msg('网络异常，请稍后重试');
            },
            error: function (data) {
                layer.msg('参数异常');
            }
        });
    }


    //渲染课程页
    function renderLeassons(arrParO) {
        const $active = $("#leassons");
        $active.html("");
        $.each(arrParO, function (i, obj) {
            const $children = $('   <li onclick="redirecToVedio(' + obj.courseId + ')">\n' +
                '                                    <a href="#">\n' +
                '                                        <div class="image-ti">\n' +
                '                                            <img src="/html/webui/images/ad020.jpg" alt="">\n' +
                '                                        </div>\n' +
                '                                        <p class="slide-title">' + obj.courseName + '</p>\n' +
                '                                        <p class="slide-body">\n' +
                '                                        <span class="slide-body-nub">\n' +
                '                                            <i class="slide-body-nub-icon"></i>\n' +
                '                                            0\n' +
                '                                        </span>\n' +
                '                                            <span class="slide-body-nup">\n' +
                '                                            <i class="slide-body-nup-icon"></i>\n' +
                '                                            0\n' +
                '                                        </span>\n' +
                '                                            <span class="slide-body-price">免费</span>\n' +
                '                                        </p>\n' +
                '                                    </a>\n' +
                '                                </li>');
            $active.append($children);
        });
    }


    //渲染视频播放页
    function renderVedioPage(data) {
        var courseList = data.clickCourseList;
        var vedioList = data.vedioList;

        document.getElementById("course_title").innerHTML = data.courseName;
        document.getElementById("course_title2").innerText = data.courseName;
        document.getElementById("course_introduction").innerHTML = data.courseDescription;
    }

    //跳转到视频页的方法
    function redirecToVedio(courseId) {
        layui.use('element', function () {
            var $ = layui.jquery
                , element = layui.element;
            localStorage.setItem("courseId", courseId);
            element.tabChange('demo', '1');

        });
    }
</script>

</body>
</html>
